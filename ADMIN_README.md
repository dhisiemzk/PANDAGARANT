Админские команды и функции

Полный справочник по всем админским возможностям Telegram бота-гаранта.

Быстрый доступ

Основные команды
- /admin - Главная админская панель
- /deal_chat <КОД> - Просмотр чата сделки  
- /complete_deal <КОД> - Завершить сделку
- /cancel_deal <КОД> - Отменить сделку

Все админские функции

Главная панель (/admin)
Доступ ко всем админским возможностям через удобное меню с кнопками.

Управление пользователями

Поиск и управление
- Поиск пользователя - Найти пользователя по ID
- Информация о пользователе:
  - ID, имя, username
  - Рейтинг и статистика сделок
  - Балансы (звёзды, крипта, рубли)
  - Количество кошельков
  - Статус (активен/заблокирован)
  - Является ли гарантом
  - Дата регистрации

Действия с пользователями
- Блокировка/разблокировка - Заблокировать или разблокировать пользователя
- Назначение гаранта - Сделать пользователя гарантом или убрать роль
- Изменение баланса - Изменить баланс в любой валюте (звёзды/крипта/рубли)
- Просмотр заблокированных - Список всех заблокированных пользователей

Управление гарантами

Информация о гарантах
- Список гарантов - Все активные гаранты с их статистикой:
  - Количество активных сделок
  - Всего завершённых сделок
  - Рейтинг
  - Время последней активности

Управление составом
- Добавить гаранта - Назначить пользователя гарантом по ID
- Убрать гаранта - Снять роль гаранта с пользователя

Управление сделками

Просмотр всех сделок
- Список сделок - Все сделки с информацией:
  - ID и код сделки
  - Участники (продавец ↔ покупатель)
  - Сумма и валюта
  - Статус (ожидание/в процессе/завершена/отменена)
  - Назначенный гарант
  - Кнопки для просмотра чата

Управление сделками
Команды:
- /complete_deal КОД - Завершить сделку администратором
- /cancel_deal КОД - Отменить сделку администратором

Возможности:
- Принудительное завершение проблемных сделок
- Отмена сделок в случае споров
- Автоматические уведомления участникам
- Системные сообщения в чат сделки

Управление чатами

Статистика чатов
- Общая статистика:
  - Всего сообщений в системе
  - Количество активных чатов
  - Среднее количество сообщений на чат

- Подробная статистика:
  - Сообщения по типам (пользовательские/системные)
  - Топ-5 самых активных чатов
  - Активность по дням за неделю

Список активных чатов
- Информация по каждому чату:
  - Статус сделки
  - ID и код сделки
  - Участники (продавец ↔ покупатель)
  - Количество сообщений
  - Время последнего сообщения

Просмотр и поиск
- Просмотр чата сделки:
  - /deal_chat КОД - Быстрый доступ к чату по коду
  - Кнопка "Чат" в списке сделок
  - Полный экспорт на pastebin/dpaste
  - Идентичная ссылка как у участников

- Поиск по сообщениям:
  - Поиск по содержимому сообщений
  - Отображение результатов с контекстом
  - Ссылки на соответствующие сделки

Система рассылки

Массовая рассылка
- Отправка сообщений всем пользователям
- Функции:
  - Поддержка Markdown форматирования
  - Подсчёт успешно доставленных сообщений
  - Отчёт об ошибках доставки
  - Предпросмотр сообщения перед отправкой

Логи и мониторинг

Просмотр логов
- Системные логи: Последние события в системе
- Фильтрация по важности: Информация, предупреждения, ошибки
- Временные метки: Точное время каждого события

Очистка логов
- Безопасная очистка с подтверждением
- Защита от случайного удаления

Системные настройки

Режим обслуживания
- Включение/выключение режима технических работ
- Блокировка функций для обычных пользователей
- Сохранение доступа для администраторов

Очистка данных
- Очистка завершённых сделок старше определённого времени
- Оптимизация базы данных
- Освобождение места на диске

Управление балансами
- Централизованное изменение балансов
- Поддержка всех валют:
  - Звёзды Telegram
  - Криптовалюты  
  - Российские рубли

Система безопасности

Проверка прав доступа
- Автоматическая проверка ID администратора
- Защита всех команд от несанкционированного доступа
- Уведомления о попытках несанкционированного доступа

Бан-система
- Блокировка пользователей:
  - Запрет на создание сделок
  - Запрет на участие в сделках
  - Сохранение доступа к завершённым сделкам

Интерфейс и навигация

Удобные кнопки
- Интуитивные иконки для каждой функции
- Логическая группировка по категориям
- Быстрая навигация между разделами
- Кнопки "Назад" на каждом уровне

Информативные отчёты
- Форматированный текст
- Структурированная подача информации
- Статистика в реальном времени
- Кнопки обновления для актуальных данных

Техническая информация

Файловая структура
- handlers/admin_handlers.py - Основной файл админских функций
- database.py - Функции работы с базой данных
- utils/keyboards.py - Клавиатуры для админки
- config.py - ID администратора (OWNER_ID) 